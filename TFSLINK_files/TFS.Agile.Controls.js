//----------------------------------------------------------
// Copyright (C) Microsoft Corporation. All rights reserved.
//----------------------------------------------------------
var __extends=this.__extends||function(b,a){for(var c in a)if(a.hasOwnProperty(c))b[c]=a[c];function d(){this.constructor=b}d.prototype=a.prototype;b.prototype=new d};define(["require","exports","Presentation/Scripts/TFS/TFS","Presentation/Scripts/TFS/TFS.Diag","Presentation/Scripts/TFS/TFS.Core","Presentation/Scripts/TFS/TFS.Core.Utils","Presentation/Scripts/TFS/TFS.Core.Ajax","Presentation/Scripts/TFS/TFS.UI.Controls","Presentation/Scripts/TFS/TFS.UI.Controls.Common","Presentation/Scripts/TFS/TFS.UI.Controls.Menus","Agile/Scripts/TFS.Agile","Agile/Scripts/TFS.Agile.Utils","Presentation/Scripts/TFS/TFS.OM","WorkItemTracking/Scripts/TFS.WorkItemTracking","Presentation/Scripts/TFS/TFS.UI.Controls.Accessories","Presentation/Scripts/TFS/Resources/TFS.Resources.AgileProductBacklog","Presentation/Scripts/TFS/Resources/TFS.Resources.AgileControls","Agile/Scripts/TFS.Agile.Capacity.Models","Presentation/Scripts/TFS/TFS.UI","Presentation/Scripts/TFS/TFS.Host","WorkItemTracking/Scripts/TFS.WorkItemTracking.Controls.Query","Presentation/Scripts/TFS/TFS.UI.Controls.Data","Admin/Scripts/TFS.Admin","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/TFS.UI.Controls.Validation"],function(U,h,j,a,b,m,u,f,k,Q,c,G,g,t,R,i,d,n,T,l,I,N,s,P,r){var p=b.delegate,e=l.TfsContext.getDefault(),S=e.configuration,L=G.DatabaseCoreFieldRefName,H=l.TfsContext,z=g.TeamAwarenessService,B=function(){function c(c,b){a.assertParamIsObject(c,"container");a.assertParamIsObject(b,"options");this._mode=b.mode;this._$container=$(c);this._actionUrl=b.url;this._events=new Sys.EventHandlerList;this._createControl()}c.createIn=function(h,b){a.assertParamIsObject(h,"container");var f=$(h),g,d,e;e=b&&b.mode?b.mode:c.MODE_FORMPOST;switch(e){case c.MODE_FORMPOST:g=$("script",f).eq(0).html();if(g){f.empty();d=m.parseMSJSON(g,false);$.extend(d,{mode:e})}else d=$.extend(b,{mode:e});break;case c.MODE_AJAXPOST:d=b;break;default:a.fail("Specified mode is not valid")}return new c(f,d)};c.prototype.isDirty=function(){return this._isDirty&&!this._submitting};c.prototype.isSubmitting=function(){return this._submitting};c.prototype.setSaveEnabled=function(b){a.assertParamIsBool(b,"enabled");if(this._submitting&&b){this._pendingSaveEnablement=true;return}this._pendingSaveEnablement=false;this._$saveButton.attr("disabled",!b)};c.prototype.setDiscardEnabled=function(b){a.assertParamIsBool(b,"enabled");this._isDirty=b;this._$cancelButton.attr("disabled",!b)};c.prototype.setSaveValue=function(a){this._saveValue=a};c.prototype.attachOnBeforeSave=function(b){a.assert($.isFunction(b),"The handler must be a function.");this._events.addHandler(c.EVENT_ON_BEFORE_SAVE,b)};c.prototype.detachOnBeforeSave=function(b){a.assert($.isFunction(b),"The handler must be a function.");this._events.removeHandler(c.EVENT_ON_BEFORE_SAVE,b)};c.prototype.attachOnCancel=function(b){a.assert($.isFunction(b),"The handler must be a function.");this._events.addHandler(c.EVENT_ON_CANCEL,b)};c.prototype.detachOnCancel=function(b){a.assert($.isFunction(b),"The handler must be a function.");this._events.removeHandler(c.EVENT_ON_CANCEL,b)};c.prototype.attachOnSaveComplete=function(b){a.assert($.isFunction(b),"The handler must be a function.");this._events.addHandler(c.EVENT_ON_AJAX_COMPLETE,b)};c.prototype.detachOnSaveComplete=function(b){a.assert($.isFunction(b),"The handler must be a function.");this._events.removeHandler(c.EVENT_ON_AJAX_COMPLETE,b)};c.prototype._createAjaxControl=function(){var a=$("<div/>");this._createButtons();a.append(this._$saveButton);a.append(this._$cancelButton);this._$container.append(a)};c.prototype._createFormControl=function(){var a;a=$("<form method='post' action='"+this._actionUrl+"' />");this._$formValue=$("<input name='saveData' type='hidden' value=''>");this._$userActionValue=$("<input name='userAction' type='hidden' value=''>");this._createButtons();a.append(this._$formValue);a.append(this._$userActionValue);a.append(this._$saveButton);a.append(this._$cancelButton);b.setAntiForgeryToken(a);this._$container.append(a)};c.prototype._createButtons=function(){switch(this._mode){case c.MODE_AJAXPOST:this._$saveButton=$("<button id='saveButton' class='form-button save-discard-save-button'>"+d.SaveDiscard_SaveButton+"</button>");this._$cancelButton=$("<button id='cancelButton' class='form-button'>"+d.SaveDiscard_DiscardButton+"</button>");break;case c.MODE_FORMPOST:this._$saveButton=$("<button id='saveButton' class='form-button save-discard-save-button' type='submit'>"+d.SaveDiscard_SaveButton+"</button>");this._$cancelButton=$("<button id='cancelButton' class='form-button' type='submit'>"+d.SaveDiscard_DiscardButton+"</button>")}};c.prototype._onSaveClick=function(){this._submitting=true;this._mode===c.MODE_AJAXPOST&&this.setSaveEnabled(false);this._raiseOnBeforeSave();switch(this._mode){case c.MODE_AJAXPOST:this._postSaveValue();break;case c.MODE_FORMPOST:this._$userActionValue.val("Save");this._updateObjectJson()}};c.prototype._onCancelClick=function(){this._submitting=true;switch(this._mode){case c.MODE_AJAXPOST:this._raiseOnCancel();break;case c.MODE_FORMPOST:this._$userActionValue.val("Cancel");this._$formValue.val("")}};c.prototype._createControl=function(){switch(this._mode){case c.MODE_AJAXPOST:this._createAjaxControl();break;case c.MODE_FORMPOST:this._createFormControl()}this._$saveButton.click(b.delegate(this,this._onSaveClick));this._$cancelButton.click(b.delegate(this,this._onCancelClick));this.setSaveEnabled(false);this.setDiscardEnabled(false);l.runningDocumentsTable.add("SaveDiscardControl",this)};c.prototype._postSaveValue=function(){a.logTracePoint("SaveDiscardControl.postMSJSON.start");u.postMSJSON(this._actionUrl,{saveData:m.stringifyMSJSON(this._saveValue)},b.delegate(this,this._onRequestSuccess),b.delegate(this,this._onRequestFail))};c.prototype._onRequestSuccess=function(b){this._submitting=false;a.assert(b.success,"Expected result to be successful in success handler");this.setSaveEnabled(false);this.setDiscardEnabled(false);this._handleRequestComplete(b)};c.prototype._onRequestFail=function(a){this._submitting=false;this._handleRequestComplete(a)};c.prototype._handleRequestComplete=function(b){if(this._pendingSaveEnablement){this._pendingSaveEnablement=false;this.setSaveEnabled(true)}this._raiseOnSaveComplete(b);a.logTracePoint("SaveDiscardControl.postMSJSON.complete")};c.prototype._updateObjectJson=function(){this._$formValue.val(m.stringifyMSJSON(this._saveValue))};c.prototype._raiseOnBeforeSave=function(){var a=this._events.getHandler(c.EVENT_ON_BEFORE_SAVE);a&&a(this)};c.prototype._raiseOnCancel=function(){var a=this._events.getHandler(c.EVENT_ON_CANCEL);a&&a(this)};c.prototype._raiseOnSaveComplete=function(b){var a=this._events.getHandler(c.EVENT_ON_AJAX_COMPLETE);a&&a(b)};c.EVENT_ON_BEFORE_SAVE="on-before-save";c.EVENT_ON_CANCEL="on-cancel";c.EVENT_ON_AJAX_COMPLETE="on-ajax-complete";c.MODE_AJAXPOST="ajaxPost";c.MODE_FORMPOST="formPost";return c}();h.SaveDiscardControl=B;j.initClassPrototype(B,{_mode:null,_$container:null,_$saveButton:null,_$cancelButton:null,_saveValue:null,_events:null,_isDirty:false,_submitting:false,_pendingSaveEnablement:false,_actionUrl:null,_$formValue:null,_$userActionValue:null});var C=function(j){__extends(h,j);function h(a){j.call(this,a)}h.prototype.initializeOptions=function(a){j.prototype.initializeOptions.call(this,$.extend({clickToggles:true},a))};h.prototype.initialize=function(){var d=this,a=m.parseMSJSON($(".sprint-data",this._element).html(),false),c=g.TfsTeamProjectCollection.getConnection(e).getService(g.TeamAwarenessService);this.populate(c.getTeamSettings(),a.selectedIteration,a.actionName);j.prototype.initialize.call(this);b.delay(this,0,function(){d._fixHeight()});this._bind(window,"resize",p(this,this._fixHeight))};h.prototype.reconfigure=function(){this._draw()};h.prototype.populate=function(e,k,l){a.assertParamIsObject(e,"teamSettings");a.assertParamIsStringNotEmpty(k,"selectedIteration");a.assertParamIsString(l,"actionName");var g=this,n=e.backlogIteration.friendlyPath,j=[];function m(h,e){var a=f.TreeNode.create(h);a.droppable=true;a.iterationPath=e;a.link=c.LinkHelpers.generateIterationLink(l,e,n);a.title=b.StringUtils.format(d.IterationPathTooltip,e);if(k===e){a.selected=true;g._selectedNode=a;g._expandNodeParents(a);g._updateSelections()}return a}function h(j,c,d){var b,i,e,h,a=f.TreeNode.create(j);if(c.length===0)return;for(b=0,i=c.length;b<i;b+=1){e=c[b].friendlyPath.split("\\");h=m(e[e.length-1],c[b].friendlyPath);a.add(h);d=d||h.selected}a.expanded=d;a.config.unselectable=true;a.folder=true;g.rootNode.add(a)}this.rootNode.clear();e.currentIteration&&j.push(e.currentIteration);h(i.SprintHeader_Past,e.previousIterations||[],false);h(i.SprintHeader_Current,j,true);h(i.SprintHeader_Future,e.futureIterations||[],true)};h.prototype._updateNode=function(c,a,f){j.prototype._updateNode.call(this,c,a,f);var d=e.navigation.currentAction;!a.hasChildren()&&a.selected&&b.StringUtils.ignoreCaseComparer(d,"iteration")===0&&this._showFilters(c)};h.prototype._showFilters=function(j){var b=g.TfsTeamProjectCollection.getConnection(e).getService(g.ProjectProcessConfigurationService).getProcessSettings(),h=b.requirementBacklog,l=b.taskBacklog,c=g.ColorsProvider.getDefault(),f=c.getPrimaryWorkItemTypeColor(h.defaultWorkItemType),i=c.getPrimaryWorkItemTypeColor(l.defaultWorkItemType),k=[f,i],d=j.find(".node-content");d.wrapInner($("<div>").addClass("text"));var a=$("<div>").addClass("filter-container");$.each(k,function(d,c){var b=$("<span>").addClass("filter");b.css("background-color",c);a.append(b)});d.append(a)};h.prototype.onItemClick=function(a,c,b){var d=j.prototype.onItemClick.call(this,a,c,b);a&&a.folder&&b.preventDefault();return d};h.prototype.setSelectedNode=function(){};h.prototype._fixHeight=function(){var a=this.getElement(),b=0,c=a.parent().height();a.siblings(":visible").each(function(){b+=$(this).outerHeight(true)});a.height(c-b)};return h}(k.TreeView);h.SprintViewControl=C;j.classExtend(C,l.TfsContext.ControlExtensions);var D=function(){function b(b,c){a.assertParamIsArray(b,"workItemTypes",true);this._options=c;this._workItemTypes=b;this._$popupContainer=$(document.body)}b.prototype.displayPopup=function(h,d,g,b,c,f){a.assertParamIsObject(d,"parentOptions");a.assertParamIsFunction(b,"successCallback");a.assertParamIsFunction(c,"errorCallback");var e=f?f:this._options?this._options.initialize:null;this._parentWorkItemOptions=d;if(this._workItemTypes.length===1)this._createAndShowWorkItem(this._workItemTypes[0],b,c,e);else this._displayWorkItemsPopupMenu(h,d,g,b,c,e)};b.prototype._createAndShowWorkItem=function(b,c,d,a){$.isFunction(this._parentWorkItemOptions.beforeCreateWorkItem)&&this._parentWorkItemOptions.beforeCreateWorkItem();G.WorkItemUtils.beginCreateWorkItemWithForm(b,this._parentWorkItemOptions,c,d,a)};b.prototype._displayWorkItemsPopupMenu=function(b,e,f,c,d,g){a.assertParamIsObject(b,"$control");a.assertParamIsObject(e,"parentOptions");a.assertParamIsFunction(c,"successCallback");a.assertParamIsFunction(d,"errorCallback");if(!this._workItemTypesPopupMenu)this._workItemTypesPopupMenu=this._createWorkItemsPopupMenu(f);this._workItemTypesPopupMenu.actionArguments={parentOptions:e,successCallback:c,errorCallback:d,initializeCallback:g};this._workItemTypesPopupMenu.popup(b,b)};b.prototype._createWorkItemsPopupMenu=function(j){var k=this,l=this,c,i,d="add-work-item-popup-",h,e=[],g=this._workItemTypes,b;for(c=0,i=g.length;c<i;c+=1){b=g[c];e.push({id:d+b,text:b,title:b,icon:""})}h=f.BaseControl.createIn(Q.PopupMenu,this._$popupContainer,$.extend(j,{align:"right",items:[{childItems:e}],executeAction:function(e){a.assertParamIsObject(e,"args");var c=e.get_commandName(),b=e.get_commandArgument(),i=b.parentOptions,f=b.successCallback,g=b.errorCallback,h=b.initializeCallback;a.assertIsStringNotEmpty(c,"Expected a command");if(c.indexOf(d)===0){a.assertIsObject(i,"Expected an object as the command argument");a.assertIsFunction(f,"Expected success callback in the command arguments");a.assertIsFunction(g,"Expected error callback in the command arguments");k._createAndShowWorkItem(c.slice(d.length),f,g,h)}}}));return h};return b}();h.AddWorkItemPopup=D;j.initClassPrototype(D,{_options:null,_workItemTypes:null,_workItemTypesPopupMenu:null,_$popupContainer:null});var o=function(d){__extends(c,d);function c(a){d.call(this,a);this._workItemChangedDelegate=p(this,this._workItemChanged)}c.prototype.initialize=function(){a.logTracePoint("ChatBurndown.initialize.start");var b=this._options.errors;if(b&&b.length>0)this._drawErrorLayout(b);else this._drawLayout();d.prototype.initialize.call(this);a.logTracePoint("ChatBurndown.initialize.complete")};c.prototype.refresh=function(b){if(typeof b==="undefined")b=false;if(this._requestInProgress)this._requestPending=true;else{a.logTracePoint("Chart_"+this._options.action+".refresh.start");var i=Math.round(this.getElement().width()),h=Math.round(this.getElement().height()-this._titleHeight);this._requestInProgress=true;this._requestPending=false;this._$image.attr("src",this._buildUrl(i,h,false,false))}if(b&&this._$largeImage){var c=$(window),g=c.width(),e=c.height(),f=Math.floor(g*65/100),d=Math.floor(e*65/100);this._$largeImage.attr("src",this._buildUrl(f,d,true,true))}};c.prototype.showLarge=function(){var e=this;a.logTracePoint("Chart_"+this._options.action+"._showLarge.start");var c=$("<div />"),m=$("<div />").appendTo(c),d=$("<div />"),l=$(window),o=l.width(),n=l.height(),i=Math.floor(o*65/100),h=Math.floor(n*65/100),p=this._buildUrl(i,h,true,true),g=this._createImageElement(h,i);g.attr("src",p);g.hide().bind("load",function(){d.removeClass("in-progress-container");g.show();a.logTracePoint("Chart_"+e._options.action+".largeImageLoad.complete")}).bind("error",function(){d.removeClass("in-progress-container")});d.height(h).width(i).addClass("large-chart-container").addClass("in-progress-container");if(this._options.showEllipsisMenuBar){var j=$("<div/>").addClass("large-chart-container-menubar");f.BaseControl.createIn(k.EllipsisMenuBar,j,{iconType:"icon-ellipsis",subItems:this._options.createEllipsisMenubarItems(),executeAction:b.delegate(this,this._options.onEllipsisMenubarItemClick)});c.append(j)}d.append(g);c.append(d);this._$largeImage=g;this._largeChart=k.Dialog.show(k.ModalDialog,{content:c,width:"auto",height:"auto",resizable:false,buttons:[],title:this._options.title,close:function(){e._largeChart=null;$(document).unbind("click.tfs.agile.chart")},open:function(){c.parent().click(function(){return false});$(document).bind("click.tfs.agile.chart",function(a){a.which===1&&e._largeChart&&e._allowClose()&&e._largeChart.close()})}});var q=f.BaseControl.createIn(k.MessageAreaControl,m,{closeable:false});this._largeChart.getElement().parent().focus()};c.prototype._$getErrorResourceFileName=function(){a.fail("this method need to be overridden in sub classes")};c.prototype._$getErrorImageClassName=function(){return""};c.prototype._allowClose=function(){return true};c.prototype._drawErrorLayout=function(a){this._options.showTitle&&$("<div/>").addClass("sprint-summary-tile-sprint-name").addClass("burndown-tile-sprint-name").text(this._options.showTitle).appendTo(this._element);this._$image=$("<img/>").attr("src",S.getResourcesFile(this._$getErrorResourceFileName())).attr("alt",a).attr("title",a).addClass(this._$getErrorImageClassName());this._element.append(this._$image)};c.prototype._drawLayout=function(){var b=this;a.logTracePoint("Chart_"+this._options.action+"._drawLayout.start");if(this._options.showTitle){var c=$("<div/>").addClass("sprint-summary-tile-sprint-name").addClass("burndown-tile-sprint-name").addClass("clickable").text(this._options.showTitle).appendTo(this._element).click(function(){b.showLarge();return false});this._titleHeight=c.outerHeight(true)}this._$image=this._createImageElement(this._element.height()-this._titleHeight,this._element.width());this._$image.attr("tabIndex",0);this._$image.attr("alt","");this._$image.addClass("clickable").click(function(){b.showLarge();return false}).hide().keyup(function(a){if(a.result!==false&&a.keyCode===13){b.showLarge();return false}}).error(function(){b._$image.hide()}).load(function(){b._$image.show();b._requestInProgress=false;b._requestPending&&b.refresh();a.logTracePoint("Chart_"+b._options.action+".smallImageLoad.complete")});this._element.append(this._$image);this.refresh();this.attachEvents()};c.prototype._workItemChanged=function(b,a){a.change===t.WorkItemChangeType.Saved&&this.refresh()};c.prototype.attachEvents=function(){var a=g.TfsTeamProjectCollection.getConnection(e).getService(t.WorkItemStore);a.workItemManager.attachWorkItemChanged(this._workItemChangedDelegate)};c.prototype.detachEvents=function(){var a=g.TfsTeamProjectCollection.getConnection(e).getService(t.WorkItemStore);a.workItemManager.detachWorkItemChanged(this._workItemChangedDelegate)};c.prototype._$getParameters=function(){a.fail("this method should not be called, subclasses need to override it")};c.prototype._buildUrl=function(c,b,f,g){a.assertParamIsInteger(c,"width");a.assertParamIsInteger(b,"height");a.assertParamIsBool(f,"showLabels");a.assertParamIsBool(g,"isLarge");var h={Width:c,Height:b,ShowDetails:f,Title:""},d=null;this._counter+=1;d=$.extend({area:"api",chartOptions:m.stringifyMSJSON(h),counter:this._counter,includeVersion:true},this._$getParameters(g));if(c<=0||b<=0){c<=0&&a.fail("Chart: Width is invalid");b<=0&&a.fail("Chart: Height is invalid")}return e.getActionUrl(this._options.action,"teamChart",d)};c.prototype._createImageElement=function(b,c){a.assertParamIsNumber(c,"width");a.assertParamIsNumber(b,"height");return $("<img/>").attr("width",c).attr("height",b)};c.prototype.dispose=function(){d.prototype.dispose.call(this);this._$largeImage=null;this._largeChart=null};c._typeName="tfs.agile.chart";return c}(f.BaseControl);h.ChartControl=o;j.initClassPrototype(o,{_$image:null,_counter:0,_largeChart:null,_requestInProgress:false,_requestPending:false,_titleHeight:0});var y=function(b){__extends(a,b);function a(a){b.call(this,a)}a.prototype.initializeOptions=function(a){b.prototype.initializeOptions.call(this,$.extend({action:"Burndown"},a))};a.prototype._$getParameters=function(){return{iterationPath:this._options.iterationPath}};a.prototype._$getErrorResourceFileName=function(){return"burndown-chart-error.png"};a.prototype._$getErrorImageClassName=function(){return"burndown-chart-error-image"};a._typeName="tfs.agile.chart.burndown";return a}(o);h.BurndownChartControl=y;var A=function(c){__extends(b,c);function b(a){this._iterationsNumber=a.iterationsNumber;c.call(this,a)}b.prototype.initializeOptions=function(a){c.prototype.initializeOptions.call(this,$.extend({action:"Velocity"},a))};b.prototype.setIterationsNumber=function(b){a.assertParamIsNumber(b,"iterationsNumber");this._iterationsNumber=b};b.prototype._$getParameters=function(){return{iterationsNumber:this._iterationsNumber}};b.prototype._$getErrorResourceFileName=function(){return"velocity-chart-error.png"};b.prototype._$getErrorImageClassName=function(){return"velocity-chart-error-image"};b._typeName="tfs.agile.chart.velocity";return b}(o);h.VelocityChartControl=A;var v=function(f){__extends(c,f);function c(a){this._categoryRefName=a.categoryRefName;this._startDate=a.startDate;f.call(this,a)}c.prototype.initializeOptions=function(a){f.prototype.initializeOptions.call(this,$.extend({action:"CumulativeFlow",showEllipsisMenuBar:true,createEllipsisMenubarItems:this._createEllipsisMenubarItems,onEllipsisMenubarItemClick:this._onEllipsisMenubarItemClick},a))};c.prototype.setCategoryRefName=function(b){a.assertParamIsStringNotEmpty(b,"categoryRefName");this._categoryRefName=b};c.prototype._$getParameters=function(){return{hubCategoryRefName:this._categoryRefName}};c.prototype._$getErrorResourceFileName=function(){return"cumulative-flow-chart-error.png"};c.prototype._$getErrorImageClassName=function(){return"cumulative-flow-chart-error-image"};c.prototype._allowClose=function(){return!Boolean(this._settingsDialog)};c.prototype._createEllipsisMenubarItems=function(){var a=[];a.push({id:c.MENUBAR_EDIT_CHART,title:d.EditButtonText,text:d.EditButtonText,icon:"icon-edit-grey-f1-background"});return a};c.prototype._onEllipsisMenubarItemClick=function(a){a=a.get_commandName();switch(a){case c.MENUBAR_EDIT_CHART:this._onEditClick()}return false};c.prototype._onEditClick=function(){var a=this;this._settingsDialog=k.Dialog.show(K,{startDate:this._startDate,isTeamAdmin:this._options.isTeamAdmin,okCallback:function(b){u.postMSJSON(e.getActionUrl("SetCumulativeFlowStartDate","TeamChart",{area:"api"}),{hubCategoryRefName:a._categoryRefName,startDate:b},function(){a.refresh(true);a._startDate=b},function(a){j.errorHandler.showError(a.message)})},close:function(){b.delay(a,0,function(){a._settingsDialog=null})}})};c._typeName="tfs.agile.chart.cumulativeflow";c.MENUBAR_EDIT_CHART="edit-chart";c.START_DATE_PROPERTYNAME="cfdStartDate";return c}(o);h.CumulativeFlowChartControl=v;var K=function(e){__extends(c,e);function c(b){a.logTracePoint("CumulativeFlowSettingsDialog.constructor");e.call(this,b)}c.prototype.initializeOptions=function(a){e.prototype.initializeOptions.call(this,$.extend({title:d.CumulativeFlowSettingsDialogTitle,resizable:false,minHeight:300,okText:d.SaveAndCloseButtonText},a))};c.prototype.initialize=function(){var m=this;e.prototype.initialize.call(this);a.logTracePoint("CumulativeFlowSettingsDialog.initialize.begin");var g=this.getElement().addClass("cumulative-flow-edit-settings"),j=$("<div />").addClass("description").text(d.CumulativeFlowSettingsDescription);T.BrowserCheckUtils.isFirefox()&&j.attr("tabindex",0);var i=$("<div />"),l=$("<table />"),h=$("<tr />"),c=$("<input />").attr({type:"text",id:"chartStartDate",placeholder:d.CumulativeFlowSettingsStartDatePlaceholder});this._options.startDate&&c.val(b.DateUtils.localeFormat(b.DateUtils.parseLocale(this._options.startDate),"d"));$("<label />").attr("for","chartStartDate").text(d.CumulativeFlowSettingsStartDateLabel).appendTo($("<td />","label").appendTo(h));c.appendTo($("<td />").appendTo(h));h.appendTo(l);f.Enhancement.enhance(k.DatePicker,c,{dropOptions:{host:$(document.body)},change:p(this,this._onStartDateChange)});this._throttleValidateDelegate=b.throttledDelegate(this,500,function(){m._validate()});f.Enhancement.enhance(J,c,{isTeamAdmin:this._options.isTeamAdmin});f.BaseControl.createIn(r.ValidationSummary,i,{context:g});g.append(j);g.append(i);g.append(l);this._$startDate=c;this._validate();a.logTracePoint("CumulativeFlowSettingsDialog.initialize.end")};c.prototype.onOkClick=function(){a.logTracePoint(this.getTypeName()+".OkClicked");var b=this._options.okCallback,c=$.trim(this._$startDate.val());if($.isFunction(b)){b.call(this,c);a.logTracePoint(this.getTypeName()+".callback-complete")}this.close()};c.prototype._onStartDateChange=function(){var a=$.trim(this._$startDate.val());if(a){var c=b.DateUtils.parseLocale(a);if(c instanceof Date){this._validate();return}}this._throttleValidateDelegate()};c.prototype._validate=function(){var a=r.validateGroup("*",null,this.getElement());this.updateOkButton(a)};c._typeName="tfs.agile.chart.cumulativeflow.settings";return c}(k.ModalDialog),J=function(c){__extends(a,c);function a(a){c.call(this,a);this._isTeamAdmin=Boolean(a.isTeamAdmin)}a.prototype.initializeOptions=function(a){c.prototype.initializeOptions.call(this,a)};a.prototype.isValid=function(){this._message=null;if(!this._isTeamAdmin){this._message=d.CumulativeFlowSettingsNoPermission;return false}var f=$.trim(this.getValue());if(f){var c=b.DateUtils.parseLocale(f);if(!(c instanceof Date)||isNaN(c)){this._message=b.StringUtils.format(d.CumulativeFlowSettingsInvalidDate,b.DateUtils.localeFormat(new Date((new Date).getFullYear(),11,31),"d",true));return false}var a=new Date;a.setHours(0,0,0,0);a.setDate(a.getDate()-217);if(a.getTime()-c.getTime()>0){this._message=b.StringUtils.format(d.CumulativeFlowSettingsEarlyDate,b.DateUtils.localeFormat(a,"d",true));return false}var e=new Date;e.setHours(0,0,0,0);if(e.getTime()-c.getTime()<0){this._message=d.CumulativeFlowSettingsFutureDate;return false}}return true};a.prototype.getMessage=function(){return this._message};return a}(r.BaseValidator);f.Enhancement.registerEnhancement(A,".velocity-chart");f.Enhancement.registerEnhancement(y,".burndown-chart");f.Enhancement.registerEnhancement(v,".cumulative-flow-chart");var F=function(c){__extends(a,c);function a(a){c.call(this,a)}a.prototype.initializeOptions=function(a){c.prototype.initializeOptions.call(this,$.extend({cssClass:"team-working-days"},a))};a.prototype.initialize=function(){var a=this;n.TeamCapacity.getTeamCapacity().attachTeamDaysOffChanged(function(){a.update()});this.update();c.prototype.initialize.call(this)};a.prototype.update=function(){var a,e,c=n.TeamCapacity.getTeamCapacity();if(!c.hasIterationDates())return;if(c.isCurrentIteration()){a=c.getTeamDaysOffCurrentDatesBreakdown().workingDays;e=a===1?d.WorkingDays_Work_Day_Remaining:d.WorkingDays_Work_Days_Remaining}else{a=c.getTeamDaysOffTotalDatesBreakdown().workingDays;e=a===1?d.WorkingDays_Work_Day:d.WorkingDays_Work_Days}this._element.html(b.StringUtils.format(e,a))};a._typeName="tfs.agile.workingdays";return a}(f.BaseControl);f.Enhancement.registerEnhancement(F,".team-working-days");var q=function(h){__extends(c,h);function c(a){h.call(this,a)}c.prototype.initializeOptions=function(a){h.prototype.initializeOptions.call(this,$.extend({cssClass:"sprint-dates-working-days",syncWorkItemTracking:true},a))};c.prototype.initialize=function(){var b=this;h.prototype.initialize.call(this);this.createLayout();l.ActionManager.registerActionWorker(s.Actions.EDIT_CLASSIFICATION,function(c,e){a.assertParamIsStringNotEmpty(c,"actionArgs");var d=c;b._showIterationDialog(d);return e(c)})};c.prototype.createLayout=function(){this._$sprintDates=$("<div>").addClass("sprint-date hub-title-right");this._$workingDays=$("<div>").addClass("sprint-working-days hub-title-right-secondary");this._setSprintDates(this._options.dates);this._setWorkingDays(Boolean(this._options.dates));this.getElement().append(this._$sprintDates).append(this._$workingDays)};c.prototype.beginGetDataProvider=function(a,d){var c=this;if(this._dataProvider)b.delay(this,0,a,this._dataProvider);else this.beginGetIterations(function(b){c._dataProvider=new N.FieldDataProvider(b);a&&a.call(c,c._dataProvider)},d)};c.prototype.beginGetIterations=function(c,a){var b=this._options.tfsContext.getActionUrl("GetIterations","classification",{area:"api"});u.getMSJSON(b,null,function(a){c(a)},a)};c.prototype._setSprintDates=function(e){var b=this._$sprintDates,c=p(this,this._editIteration);a.assert(b,"Expected to find the $sprintDates object");if(e){b.text(e).addClass("dates-set").attr("title",d.EditDatesForIteration);this._bind(b,"click",c)}else{this._unbind(b,"click",c);b.text(d.SprintDates_NoneSet).removeClass("dates-set").attr("title","")}};c.prototype._setWorkingDays=function(b){var a;if(b)this._workingDays=f.Enhancement.enhance(F,this._$workingDays);else{a=$("<a>").attr("href","#").text(d.SprintDates_SetDates).attr("title",d.ClickToEditDatesForIteration).click(p(this,this._editIteration));this._$workingDays.append(a)}};c.prototype._editIteration=function(){a.logTracePoint("SprintDates._editIteration.start");l.ActionManager.performAction(s.Actions.EDIT_CLASSIFICATION,this._options.iterationId)};c.prototype._showIterationDialog=function(f){a.assertParamIsStringNotEmpty(f,"id");var c=this;k.Dialog.beginExecuteDialogAction(function(i){function h(c,a,b){i();j.handleError(c,a,b)}j.using(["Admin/Scripts/TFS.Admin.AreaIterations.DataModels","Admin/Scripts/TFS.Admin.AreaIterations"],function(k,l){c.beginGetDataProvider(function(m){var q=k.CssNode,r=m.getNodeFromId(f),o,n,p;function t(a){var d=m.updateNode(a.node);a=q.create(d,m);(n.path!==a.getPath()||!b.DateUtils.equals(n.startDate,a.getStartDate())||!b.DateUtils.equals(n.endDate,a.getEndDate()))&&c._raiseEventChanged(a.getPath())}function s(c,b){for(var a=b.length-1;a>=0;a-=1)if(b[a].friendlyPath===c)return a>0?b[a-1].id:null;return null}if(r!==null){o=q.create(r,m);n={path:o.getPath(),startDate:o.getStartDate(),endDate:o.getEndDate()};p={disableLocationEdit:true,syncWorkItemTracking:c._options.syncWorkItemTracking};g.TfsTeamProjectCollection.getConnection(e).getService(z).beginGetTeamSettings(function(b){var d=b.previousIterations.concat(b.currentIteration,b.futureIterations),c=s(n.path,d);g.TfsTeamProjectCollection.getConnection(e).getService(g.ProjectProcessConfigurationService).beginGetProcessSettings(function(b){if(c){p.previousIteration=q.create(m.getNodeFromId(c),m);p.weekends=b.weekends}l.Dialogs.showEditClassificationDialog(o,t,p);a.logTracePoint("CreateEditIterationDialog.show.complete")},h)},h)}else{i();j.errorHandler.showError(b.StringUtils.format(d.SprintDates_IterationNotFound,c._options.iterationId,c._options.iterationPath))}},h)})})};c.prototype._raiseEventChanged=function(b){a.assertParamIsStringNotEmpty(b,"iterationPath");l.notificationService.fire(s.Notifications.CLASSIFICATION_CHANGED,this,b)};c._typeName="tfs.agile.sprintdates";return c}(f.BaseControl);h.SprintDates=q;j.initClassPrototype(q,{_workingDays:null,_$sprintDates:null,_$workingDays:null,_dataProvider:null});j.classExtend(q,H.ControlExtensions);f.Enhancement.registerEnhancement(q,".sprint-dates-working-days");var x=function(e){__extends(c,e);function c(a){e.call(this,a)}c.prototype.initialize=function(){a.logTracePoint("SprintCapacityDashboard.initialize.start");e.prototype.initialize.call(this);a.assertIsJQueryObject(this._element,"_element is missing");var k=$(this._element),w,j,h=$("<div/>"),t,r,s,x,B="Work",l,v=$("<div/>"),u=$("<div/>"),z=$("<div/>"),g,q,p,c;c=m.parseMSJSON(k.children().eq(0).html(),false);a.assert(c,"Missing capacity payload");k.append(h);n.TeamCapacity._teamCapacity=new n.TeamCapacity(c);w=n.TeamCapacity.getTeamCapacity();t=new n.AggregatedCapacity(c.aggregatedCapacity.aggregatedCapacity);r=t.getAggregatedValue(L.AssignedTo);s=w.getTotalRemainingCapacity();x=Math.max(r,s);l=c.sprintName||"";if(c.hideTitle){v.hide();u.hide()}v.text(l).addClass("sprint-summary-tile-sprint-name").attr("title",l).appendTo(h);u.text(c.sprintDateRange||"").addClass("sprint-summary-tile-sprint-dates").attr("title",c.sprintDateRange||"").appendTo(h);if(c.addTitleToParent)try{var y=this._element.closest(".tile-zone").parent().find(".grid-cell-title"),A=y.find(".tile-info-message");y.find(".cell-title").html(l);$("<span></span>").prependTo(A).addClass("sprint-summary-tile-sprint-dates").css({"margin-right":"16px","line-height":"0"}).html(c.sprintDateRange||"")}catch(C){}g="";q=b.StringUtils.format(d.StoriesNotStarted,c.storiesNotStarted);p=b.StringUtils.format(d.StoriesInProgress,c.storiesInProgress);if(c.storiesNotStarted&&c.storiesInProgress)g=b.StringUtils.format(d.StoriesWithTwoStatusesLabel,c.storiesPlural,q,p);else if(c.storiesNotStarted)g=b.StringUtils.format(d.StoriesWithOneStatusLabel,c.storiesPlural,q);else if(c.storiesInProgress)g=b.StringUtils.format(d.StoriesWithOneStatusLabel,c.storiesPlural,p);z.text(g).attr("title",g).addClass("sprint-summary-tile-sprint-progress-text").appendTo(h);j=f.BaseControl.createIn(R.ProgressControl,h,{current:r,total:s,maxTotal:x,text:B,suffixFormat:c.capacityOptions.suffixFormat,height:30});$(".display-text",j.getElement()).remove();var o=$(".progress-text",j.getElement());$(".progress-text",j.getElement()).remove();h.prepend(o);var i=o.text();i[0]==="("&&i[i.length-1]===")"&&o.text(i.substring(1,i.length-1));o.show();k.hide();k.fadeIn("fast");a.logTracePoint("SprintCapacityDashboard.initialize.complete")};return c}(f.BaseControl);j.classExtend(x,H.ControlExtensions);f.Enhancement.registerEnhancement(x,".sprint-capacity-summary-control");var M=function(b){__extends(a,b);function a(){b.apply(this,arguments)}a.prototype.activateSearch=function(){b.prototype.activateSearch.call(this);this._searchAdapter.saveAndDisableBacklogComponents()};a.prototype.deactivateSearch=function(){b.prototype.deactivateSearch.call(this);this._searchAdapter.restoreBacklogComponents();this._searchAdapter.reselectWorkItem()};a._typeName="tfs.agile.controls.BacklogSearchControl";return a}(I.QueryResultsSearchControl);h.BacklogSearchControl=M;var w=function(){function d(f,b,c,d,e){a.assertParamIsObject(c,"processSettings");a.assertParamIsObject(d,"backlogContext");a.assertParamIsObject(e,"colorsProvider");a.assertParamIsStringNotEmpty(f,"actionName");a.assertParamIsStringNotEmpty(b,"currentPageAction");this._actionName=f;this._processSettings=c;this._backlogContext=d;this._colorsProvider=e;this._currentPageAction=b;this._backlogNodes=[];this._initialize()}d.CreateInstance=function(f,a){var b=g.TfsTeamProjectCollection.getConnection(e).getService(g.ProjectProcessConfigurationService).getProcessSettings();return new d(f,a,b,c.BacklogContext.getInstance(),g.ColorsProvider.getDefault())};d.prototype._initialize=function(){var p=this._processSettings.portfolioBacklogs,a=this._processSettings.requirementBacklog,f=this._processSettings.taskBacklog,o=this._colorsProvider.getPrimaryWorkItemTypeColor(a.defaultWorkItemType),r=this._colorsProvider.getPrimaryWorkItemTypeColor(f.defaultWorkItemType);this._addPortfolios(p);var l=this._getFilterUrls(a,f),k=l.requirement,u=l.task,m=this._backlogContext.hub.getIntermediateBacklogNames(f),g="",h="";if(this._backlogContext.isHubContext(a))g=b.StringUtils.format(i.Tooltip_BacklogFilter_Hub_View,a.plural,e.currentTeam.name);else{var n=this._backlogContext.hub.getIntermediateBacklogNames(a);g=n.join();g=b.StringUtils.format(i.Tooltip_BacklogFilter_Filter_DrillDown_View,this._backlogContext.hub.plural,e.currentTeam.name,g)}h=m.join();h=b.StringUtils.format(i.Tooltip_BacklogFilter_Filter_DrillDown_View,this._backlogContext.hub.plural,e.currentTeam.name,h);var t=this._showBacklogFilter(a),s=b.StringUtils.ignoreCaseComparer(this._currentPageAction,d.backlogPageAction)===0,j;if(c.IsWebAccessAsyncEnabled())j=c.LinkHelpers.getAsyncBacklogLink(this._actionName,{hub:a.plural});else j=e.getActionUrl(this._actionName,"backlogs",{parameters:a.plural});var q={name:a.plural,url:j,isHubContext:this._backlogContext.isHubContext(a),isSelected:this._backlogContext.isHubContext(a)&&this._showHubAsSelected(),isRequirement:true,title:b.StringUtils.format(i.Tooltip_BacklogFilter_Hub,a.plural,e.currentTeam.name),showFilterEffects:b.StringUtils.ignoreCaseComparer(this._currentPageAction,d.backlogPageAction)===0,filters:[{url:this._backlogContext.isFilterContext(a)?this._getNextFilterUrl():k,color:o,isFiltered:this._backlogContext.isInFilteredView(a),title:g,backlog:a,showFilter:t,isLeafFilter:this._backlogContext.isFilterContext(a)},{url:this._backlogContext.isFilterContext(f)?k:u,color:r,isFiltered:this._backlogContext.isInFilteredView(f),title:h,backlog:f,showFilter:s,isLeafFilter:this._backlogContext.isFilterContext(f)}]};this._backlogContext.isInPortfolios(a.plural)&&this._backlogNodes.push(q)};d.prototype.getBacklogNodes=function(){return this._backlogNodes};d.prototype._getFilterUrls=function(a,b){var e,f;if(this._backlogContext.filter)if(c.IsWebAccessAsyncEnabled()){e=this._backlogContext.isFilterContext(a)?null:c.LinkHelpers.getAsyncBacklogLink(d.backlogPageAction,{hub:this._backlogContext.hub.plural,filter:a.plural});f=this._backlogContext.isFilterContext(b)?null:c.LinkHelpers.getAsyncBacklogLink(d.backlogPageAction,{hub:this._backlogContext.hub.plural,filter:b.plural})}else{e=this._backlogContext.isFilterContext(a)?null:c.LinkHelpers.generateBacklogLink(d.backlogPageAction,a.plural);f=this._backlogContext.isFilterContext(b)?null:c.LinkHelpers.generateBacklogLink(d.backlogPageAction,b.plural)}else if(c.IsWebAccessAsyncEnabled()){e=this._backlogContext.isHubContext(a)?null:c.LinkHelpers.getAsyncBacklogLink(d.backlogPageAction,{hub:this._backlogContext.hub.plural,filter:a.plural});f=c.LinkHelpers.getAsyncBacklogLink(d.backlogPageAction,{hub:this._backlogContext.hub.plural,filter:b.plural})}else{e=this._backlogContext.isHubContext(a)?null:c.LinkHelpers.generateBacklogLink(d.backlogPageAction,a.plural);f=c.LinkHelpers.generateBacklogLink(d.backlogPageAction,b.plural)}return{requirement:e,task:f}};d.prototype._addPortfolios=function(l){for(var k=0;k<l.length;k++){var a=l[k],f=a.plural,r=false,q=this._colorsProvider.getPrimaryWorkItemTypeColor(a.defaultWorkItemType),r=this._backlogContext.isInFilteredView(a),n=this._backlogContext.hub.compare(a),o=this._backlogContext.hub.getIntermediateBacklogNames(a),m=this._backlogContext.isFilterContext(a),g=o.join();if(!this._backlogContext.isInPortfolios(f))continue;if(n===1)g=b.StringUtils.format(i.Tooltip_BacklogFilter_Filter_DrillDown_View,this._backlogContext.hub.plural,e.currentTeam.name,g);else if(n===-1)g=b.StringUtils.format(i.Tooltip_BacklogFilter_Filter_DrillUp_View,this._backlogContext.hub.plural,e.currentTeam.name,g);else g=b.StringUtils.format(i.Tooltip_BacklogFilter_Hub_View,a.plural,e.currentTeam.name);var s=this._showBacklogFilter(a),j;if(c.IsWebAccessAsyncEnabled())j=c.LinkHelpers.getAsyncBacklogLink(this._actionName,{hub:f});else j=e.getActionUrl(this._actionName,"backlogs",{parameters:f});var h;if(c.IsWebAccessAsyncEnabled())h=m?this._getNextFilterUrl():c.LinkHelpers.getAsyncBacklogLink(d.backlogPageAction,{hub:this._backlogContext.hub.plural,filter:f});else h=m?this._getNextFilterUrl():c.LinkHelpers.generateBacklogLink(d.backlogPageAction,f);var p={name:f,url:j,isHubContext:this._backlogContext.isHubContext(a),isSelected:this._backlogContext.isHubContext(a)&&this._showHubAsSelected(),isRequirement:false,title:b.StringUtils.format(i.Tooltip_BacklogFilter_Hub,f,e.currentTeam.name),showFilterEffects:b.StringUtils.ignoreCaseComparer(this._currentPageAction,d.backlogPageAction)===0,filters:[{url:h,color:q,isFiltered:r,title:g,backlog:a,showFilter:s,isLeafFilter:this._backlogContext.isFilterContext(a)}]};this._backlogNodes.push(p)}};d.prototype._getNextFilterUrl=function(){var a=this._backlogContext.filter,b=this._backlogContext.getBacklogFilterState();return b===2?c.IsWebAccessAsyncEnabled()?c.LinkHelpers.getAsyncBacklogLink(d.backlogPageAction,{hub:this._backlogContext.hub.plural,filter:a.child.plural}):c.LinkHelpers.generateBacklogLink(d.backlogPageAction,a.child.plural):b===1?c.IsWebAccessAsyncEnabled()?c.LinkHelpers.getAsyncBacklogLink(d.backlogPageAction,{hub:this._backlogContext.hub.plural,filter:a.parent.plural}):c.LinkHelpers.generateBacklogLink(d.backlogPageAction,a.parent.plural):null};d.prototype._showBacklogFilter=function(a){return b.StringUtils.ignoreCaseComparer(this._currentPageAction,d.backlogPageAction)===0||b.StringUtils.ignoreCaseComparer(this._currentPageAction,d.boardPageAction)===0&&this._backlogContext.isHubContext(a)};d.prototype._showHubAsSelected=function(){return b.StringUtils.ignoreCaseComparer(this._currentPageAction,d.backlogPageAction)===0||b.StringUtils.ignoreCaseComparer(this._currentPageAction,d.boardPageAction)===0};d.backlogPageAction="backlog";d.boardPageAction="board";return d}();h.BacklogViewControlModel=w;var E=function(b){__extends(a,b);function a(a){this.backlogNodeInfo=a;b.call(this,a.name)}return a}(f.TreeNode);h.BacklogTreeNode=E;var O=function(d){__extends(b,d);function b(a){var b=m.parseMSJSON($(".backlog-data",this.getElement()).html(),false);a=$.extend(b,a);this._setupConfigurationData(b.actionName,b.currentPageAction);d.call(this,a)}b.prototype.initialize=function(){this._initialize(this._options.actionName);d.prototype.initialize.call(this)};b.prototype.initializeOptions=function(b){var a={};if(!c.IsWebAccessAsyncEnabled())a.clickSelects=false;d.prototype.initializeOptions.call(this,$.extend(a,b))};b.prototype.reconfigure=function(a,b){this._setupConfigurationData(a,b);this._initialize(a);this._draw()};b.prototype._setupConfigurationData=function(b,a){this._filtersMap={};this._allFilterArr=[];this._filteredElementsArr=[];this._model=w.CreateInstance(b,a||e.navigation.currentAction);this._backlogFilterState=c.BacklogContext.getInstance().getBacklogFilterState()};b.prototype._initialize=function(c){var b=g.TfsTeamProjectCollection.getConnection(e).getService(z),a=false;if(e.isHosted)a=!g.FeatureLicenseService.getDefaultService(e).getFeatureState(P.FeatureLicenseFlags.LicensePortfolioBacklogManagement);this.populate(a,b.getTeamSettings(),c)};b.prototype.populate=function(h,e,f){var b=this;a.assertParamIsStringNotEmpty(f,"actionName");var c=e.backlogIteration.friendlyPath,d=this._model.getBacklogNodes(),g=function(d,e){var a=new E(d);a.droppable=e;if(e)a.iterationPath=c;else if(h)a.config.css="preview";a.link=d.url;a.title=d.title;a.noTreeIcon=true;if(d.isHubContext)b._hub=d.filters[0].backlog;if(d.isSelected){a.selected=true;b._selectedNode=a;b._updateSelections()}return a};this.rootNode.clear();$.each(d,function(d,a){var c=a.isRequirement;b.rootNode.add(g(a,c))})};b.prototype.onItemClick=function(a,e,b){return c.IsWebAccessAsyncEnabled()?this._confirmNavigationChange(b,a):d.prototype.onItemClick.call(this,a,e,b)};b.prototype._confirmNavigationChange=function(){if(this._options.isWorkQueuedDelegate&&this._options.isWorkQueuedDelegate()){this._options.getMessageAreaDelegate&&this._options.getMessageAreaDelegate().setMessage(i.ProductBacklog_Error_UnsavedChanges);l.customerIntelligence.publish(c.CustomerIntelligenceConstants.AGILE_AREA,c.CustomerIntelligenceConstants.PRODUCTBACKLOG_FEATURE,c.CustomerIntelligenceConstants.PRODUCTBACKLOG_SWITCH_PROPERTY,"WithUnsavedWork");return false}return this._options.isRefreshingDelegate&&this._options.isRefreshingDelegate()?false:true};b.prototype._updateNode=function(b,a,c){d.prototype._updateNode.call(this,b,a,c);!a.hasChildren()&&this._showFilters(a,b)};b.prototype.getModel=function(){return this._model};b.prototype._showFilters=function(e,f){var a=this,d=f.find(".node-content"),b=e.backlogNodeInfo;d.wrapInner($("<div>").addClass("text"));$.each(b.filters,function(i,f){if(!f.showFilter)return false;var h=$("<div>").addClass("filter-container"),g=$("<span>").addClass("filter");if(b.isRequirement)if(i===0)h.addClass("requirement-filter-container");else h.addClass("task-filter-container");f.title&&h.attr("title",f.title);if(b.isHubContext&&i===0&&b.showFilterEffects&&a._backlogFilterState!==0){if(b.isRequirement&&b.filters[1].isLeafFilter)g.css("background-color",f.color);else if(a._backlogFilterState===2){g.addClass("funnel-up");g.css("border-bottom-color",f.color)}else if(a._backlogFilterState===1){g.addClass("funnel-down");g.css("border-top-color",f.color)}}else g.css("background-color",f.color);if(!f.isFiltered)g.addClass("unfiltered");else a._filteredElementsArr.push(g[0]);if(b.showFilterEffects){h.bind("click.TFS.Agile",function(b){if(f.url){if(c.IsWebAccessAsyncEnabled()&&!a._confirmNavigationChange(b,e))return false;l.ActionManager.performAction(l.CommonActions.ACTION_WINDOW_NAVIGATE,{url:f.url})}return false});h.bind("mouseover",function(b){b.preventDefault();a._onFilterMouseOver(f);return false});h.bind("mouseout",function(b){b.preventDefault();a._onFilterMouseOut();return false})}h.append(g);d.append(h);a._filtersMap[f.backlog.category]=g;a._allFilterArr.push(g[0])})};b.prototype._onFilterMouseOver=function(d){var e=this,c=d.backlog,a=this._hub.getIntermediateBacklogs(c);$.each(a,function(c,a){e._filtersMap[a.category].addClass(b.HOVERED_CSS_CLASS)})};b.prototype._onFilterMouseOut=function(){$(this._allFilterArr).removeClass(b.HOVERED_CSS_CLASS).addClass(b.UNFILTERED_CSS_CLASS);$(this._filteredElementsArr).removeClass(b.UNFILTERED_CSS_CLASS)};b.UNFILTERED_CSS_CLASS="unfiltered";b.HOVERED_CSS_CLASS="hover";b.EVENT_BACKLOG_VIEW_CHANGE="backlog.view.change";return b}(k.TreeView);h.BacklogViewControl=O;j.tfsModuleLoaded("TFS.Agile.Controls",h)});
// SIG // Begin signature block
// SIG // MIIarwYJKoZIhvcNAQcCoIIaoDCCGpwCAQExCzAJBgUr
// SIG // DgMCGgUAMGcGCisGAQQBgjcCAQSgWTBXMDIGCisGAQQB
// SIG // gjcCAR4wJAIBAQQQEODJBs441BGiowAQS9NQkAIBAAIB
// SIG // AAIBAAIBAAIBADAhMAkGBSsOAwIaBQAEFCXmz3ReYGyA
// SIG // +TMsg1QmbCIScGSYoIIVejCCBLswggOjoAMCAQICEzMA
// SIG // AABa7S/05CCZPzoAAAAAAFowDQYJKoZIhvcNAQEFBQAw
// SIG // dzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0
// SIG // b24xEDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1p
// SIG // Y3Jvc29mdCBDb3Jwb3JhdGlvbjEhMB8GA1UEAxMYTWlj
// SIG // cm9zb2Z0IFRpbWUtU3RhbXAgUENBMB4XDTE0MDUyMzE3
// SIG // MTMxNVoXDTE1MDgyMzE3MTMxNVowgasxCzAJBgNVBAYT
// SIG // AlVTMQswCQYDVQQIEwJXQTEQMA4GA1UEBxMHUmVkbW9u
// SIG // ZDEeMBwGA1UEChMVTWljcm9zb2Z0IENvcnBvcmF0aW9u
// SIG // MQ0wCwYDVQQLEwRNT1BSMScwJQYDVQQLEx5uQ2lwaGVy
// SIG // IERTRSBFU046QjhFQy0zMEE0LTcxNDQxJTAjBgNVBAMT
// SIG // HE1pY3Jvc29mdCBUaW1lLVN0YW1wIFNlcnZpY2UwggEi
// SIG // MA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCzISLf
// SIG // atC/+ynJ1Wx6iamNE7yUtel9KWXaf/Qfqwx5YWZUYZYH
// SIG // 8NRgSzGbCa99KG3QpXuHX3ah0sYpx5Y6o18XjHbgt5YH
// SIG // D8diYbS2qvZGFCkDLiawHUoI4H3TXDASppv2uQ49UxZp
// SIG // nbtlJ0LB6DI1Dvcp/95bIEy7L2iEJA+rkcTzzipeWEbt
// SIG // qUW0abZUJpESYv1vDuTP+dw/2ilpH0qu7sCCQuuCc+lR
// SIG // UxG/3asdb7IKUHgLg+8bCLMbZ2/TBX2hCZ/Cd4igo1jB
// SIG // T/9n897sx/Uz3IpFDpZGFCiHHGC39apaQExwtWnARsjU
// SIG // 6OLFkN4LZTXUVIDS6Z0gVq/U3825AgMBAAGjggEJMIIB
// SIG // BTAdBgNVHQ4EFgQUvmfgLgIbrwpyDTodf4ydayJmEfcw
// SIG // HwYDVR0jBBgwFoAUIzT42VJGcArtQPt2+7MrsMM1sw8w
// SIG // VAYDVR0fBE0wSzBJoEegRYZDaHR0cDovL2NybC5taWNy
// SIG // b3NvZnQuY29tL3BraS9jcmwvcHJvZHVjdHMvTWljcm9z
// SIG // b2Z0VGltZVN0YW1wUENBLmNybDBYBggrBgEFBQcBAQRM
// SIG // MEowSAYIKwYBBQUHMAKGPGh0dHA6Ly93d3cubWljcm9z
// SIG // b2Z0LmNvbS9wa2kvY2VydHMvTWljcm9zb2Z0VGltZVN0
// SIG // YW1wUENBLmNydDATBgNVHSUEDDAKBggrBgEFBQcDCDAN
// SIG // BgkqhkiG9w0BAQUFAAOCAQEAIFOCkK6mTU5+M0nIs63E
// SIG // w34V0BLyDyeKf1u/PlTqQelUAysput1UiLu599nOU+0Q
// SIG // Fj3JRnC0ANHyNF2noyIsqiLha6G/Dw2H0B4CG+94tokg
// SIG // 0CyrC3Q4LqYQ/9qRqyxAPCYVqqzews9KkwPNa+Kkspka
// SIG // XUdE8dyCH+ZItKZpmcEu6Ycj6gjSaeZi33Hx6yO/IWX5
// SIG // pFfEky3bFngVqj6i5IX8F77ATxXbqvCouhErrPorNRZu
// SIG // W3P+MND7q5Og3s1C2jY/kffgN4zZB607J7v/VCB3xv0R
// SIG // 6RrmabIzJ6sFrliPpql/XRIRaAwsozEWDb4hq5zwrhp8
// SIG // QNXWgxYV2Cj75TCCBOwwggPUoAMCAQICEzMAAADKbNUy
// SIG // EjXE4VUAAQAAAMowDQYJKoZIhvcNAQEFBQAweTELMAkG
// SIG // A1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0b24xEDAO
// SIG // BgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1pY3Jvc29m
// SIG // dCBDb3Jwb3JhdGlvbjEjMCEGA1UEAxMaTWljcm9zb2Z0
// SIG // IENvZGUgU2lnbmluZyBQQ0EwHhcNMTQwNDIyMTczOTAw
// SIG // WhcNMTUwNzIyMTczOTAwWjCBgzELMAkGA1UEBhMCVVMx
// SIG // EzARBgNVBAgTCldhc2hpbmd0b24xEDAOBgNVBAcTB1Jl
// SIG // ZG1vbmQxHjAcBgNVBAoTFU1pY3Jvc29mdCBDb3Jwb3Jh
// SIG // dGlvbjENMAsGA1UECxMETU9QUjEeMBwGA1UEAxMVTWlj
// SIG // cm9zb2Z0IENvcnBvcmF0aW9uMIIBIjANBgkqhkiG9w0B
// SIG // AQEFAAOCAQ8AMIIBCgKCAQEAlnFd7QZG+oTLnVu3Rsew
// SIG // 4bQROQOtsRVzYJzrp7ZuGjw//2XjNPGmpSFeVplsWOSS
// SIG // oQpcwtPcUi8MZZogYUBTMZxsjyF9uvn+E1BSYJU6W7lY
// SIG // pXRhQamU4K0mTkyhl3BJJ158Z8pPHnGERrwdS7biD8XG
// SIG // J8kH5noKpRcAGUxwRTgtgbRQqsVn0fp5vMXMoXKb9CU0
// SIG // mPhU3xI5OBIvpGulmn7HYtHcz+09NPi53zUwuux5Mqnh
// SIG // qaxVTUx/TFbDEwt28Qf5zEes+4jVUqUeKPo9Lc/PhJiG
// SIG // cWURz4XJCUSG4W/nsfysQESlqYsjP4JJndWWWVATWRhz
// SIG // /0MMrSvUfzBAZwIDAQABo4IBYDCCAVwwEwYDVR0lBAww
// SIG // CgYIKwYBBQUHAwMwHQYDVR0OBBYEFB9e4l1QjVaGvko8
// SIG // zwTop4e1y7+DMFEGA1UdEQRKMEikRjBEMQ0wCwYDVQQL
// SIG // EwRNT1BSMTMwMQYDVQQFEyozMTU5NStiNDIxOGYxMy02
// SIG // ZmNhLTQ5MGYtOWM0Ny0zZmM1NTdkZmM0NDAwHwYDVR0j
// SIG // BBgwFoAUyxHoytK0FlgByTcuMxYWuUyaCh8wVgYDVR0f
// SIG // BE8wTTBLoEmgR4ZFaHR0cDovL2NybC5taWNyb3NvZnQu
// SIG // Y29tL3BraS9jcmwvcHJvZHVjdHMvTWljQ29kU2lnUENB
// SIG // XzA4LTMxLTIwMTAuY3JsMFoGCCsGAQUFBwEBBE4wTDBK
// SIG // BggrBgEFBQcwAoY+aHR0cDovL3d3dy5taWNyb3NvZnQu
// SIG // Y29tL3BraS9jZXJ0cy9NaWNDb2RTaWdQQ0FfMDgtMzEt
// SIG // MjAxMC5jcnQwDQYJKoZIhvcNAQEFBQADggEBAHdc69eR
// SIG // Pc29e4PZhamwQ51zfBfJD+0228e1LBte+1QFOoNxQIEJ
// SIG // ordxJl7WfbZsO8mqX10DGCodJ34H6cVlH7XPDbdUxyg4
// SIG // Wojne8EZtlYyuuLMy5Pbr24PXUT11LDvG9VOwa8O7yCb
// SIG // 8uH+J13oxf9h9hnSKAoind/NcIKeGHLYI8x6LEPu/+rA
// SIG // 4OYdqp6XMwBSbwe404hs3qQGNafCU4ZlEXcJjzVZudiG
// SIG // qAD++DF9LPSMBZ3AwdV3cmzpTVkmg/HCsohXkzUAfFAr
// SIG // vFn8/hwpOILT3lKXRSkYTpZbnbpfG6PxJ1DqB5XobTQN
// SIG // OFfcNyg1lTo4nNTtaoVdDiIRXnswggW8MIIDpKADAgEC
// SIG // AgphMyYaAAAAAAAxMA0GCSqGSIb3DQEBBQUAMF8xEzAR
// SIG // BgoJkiaJk/IsZAEZFgNjb20xGTAXBgoJkiaJk/IsZAEZ
// SIG // FgltaWNyb3NvZnQxLTArBgNVBAMTJE1pY3Jvc29mdCBS
// SIG // b290IENlcnRpZmljYXRlIEF1dGhvcml0eTAeFw0xMDA4
// SIG // MzEyMjE5MzJaFw0yMDA4MzEyMjI5MzJaMHkxCzAJBgNV
// SIG // BAYTAlVTMRMwEQYDVQQIEwpXYXNoaW5ndG9uMRAwDgYD
// SIG // VQQHEwdSZWRtb25kMR4wHAYDVQQKExVNaWNyb3NvZnQg
// SIG // Q29ycG9yYXRpb24xIzAhBgNVBAMTGk1pY3Jvc29mdCBD
// SIG // b2RlIFNpZ25pbmcgUENBMIIBIjANBgkqhkiG9w0BAQEF
// SIG // AAOCAQ8AMIIBCgKCAQEAsnJZXBkwZL8dmmAgIEKZdlNs
// SIG // PhvWb8zL8epr/pcWEODfOnSDGrcvoDLs/97CQk4j1XIA
// SIG // 2zVXConKriBJ9PBorE1LjaW9eUtxm0cH2v0l3511iM+q
// SIG // c0R/14Hb873yNqTJXEXcr6094CholxqnpXJzVvEXlOT9
// SIG // NZRyoNZ2Xx53RYOFOBbQc1sFumdSjaWyaS/aGQv+knQp
// SIG // 4nYvVN0UMFn40o1i/cvJX0YxULknE+RAMM9yKRAoIsc3
// SIG // Tj2gMj2QzaE4BoVcTlaCKCoFMrdL109j59ItYvFFPees
// SIG // CAD2RqGe0VuMJlPoeqpK8kbPNzw4nrR3XKUXno3LEY9W
// SIG // PMGsCV8D0wIDAQABo4IBXjCCAVowDwYDVR0TAQH/BAUw
// SIG // AwEB/zAdBgNVHQ4EFgQUyxHoytK0FlgByTcuMxYWuUya
// SIG // Ch8wCwYDVR0PBAQDAgGGMBIGCSsGAQQBgjcVAQQFAgMB
// SIG // AAEwIwYJKwYBBAGCNxUCBBYEFP3RMU7TJoqV4ZhgO6gx
// SIG // b6Y8vNgtMBkGCSsGAQQBgjcUAgQMHgoAUwB1AGIAQwBB
// SIG // MB8GA1UdIwQYMBaAFA6sgmBAVieX5SUT/CrhClOVWeSk
// SIG // MFAGA1UdHwRJMEcwRaBDoEGGP2h0dHA6Ly9jcmwubWlj
// SIG // cm9zb2Z0LmNvbS9wa2kvY3JsL3Byb2R1Y3RzL21pY3Jv
// SIG // c29mdHJvb3RjZXJ0LmNybDBUBggrBgEFBQcBAQRIMEYw
// SIG // RAYIKwYBBQUHMAKGOGh0dHA6Ly93d3cubWljcm9zb2Z0
// SIG // LmNvbS9wa2kvY2VydHMvTWljcm9zb2Z0Um9vdENlcnQu
// SIG // Y3J0MA0GCSqGSIb3DQEBBQUAA4ICAQBZOT5/Jkav629A
// SIG // sTK1ausOL26oSffrX3XtTDst10OtC/7L6S0xoyPMfFCY
// SIG // gCFdrD0vTLqiqFac43C7uLT4ebVJcvc+6kF/yuEMF2nL
// SIG // pZwgLfoLUMRWzS3jStK8cOeoDaIDpVbguIpLV/KVQpzx
// SIG // 8+/u44YfNDy4VprwUyOFKqSCHJPilAcd8uJO+IyhyugT
// SIG // pZFOyBvSj3KVKnFtmxr4HPBT1mfMIv9cHc2ijL0nsnlj
// SIG // VkSiUc356aNYVt2bAkVEL1/02q7UgjJu/KSVE+Traeep
// SIG // oiy+yCsQDmWOmdv1ovoSJgllOJTxeh9Ku9HhVujQeJYY
// SIG // XMk1Fl/dkx1Jji2+rTREHO4QFRoAXd01WyHOmMcJ7oUO
// SIG // jE9tDhNOPXwpSJxy0fNsysHscKNXkld9lI2gG0gDWvfP
// SIG // o2cKdKU27S0vF8jmcjcS9G+xPGeC+VKyjTMWZR4Oit0Q
// SIG // 3mT0b85G1NMX6XnEBLTT+yzfH4qerAr7EydAreT54al/
// SIG // RrsHYEdlYEBOsELsTu2zdnnYCjQJbRyAMR/iDlTd5aH7
// SIG // 5UcQrWSY/1AWLny/BSF64pVBJ2nDk4+VyY3YmyGuDVyc
// SIG // 8KKuhmiDDGotu3ZrAB2WrfIWe/YWgyS5iM9qqEcxL5rc
// SIG // 43E91wB+YkfRzojJuBj6DnKNwaM9rwJAav9pm5biEKgQ
// SIG // tDdQCNbDPTCCBgcwggPvoAMCAQICCmEWaDQAAAAAABww
// SIG // DQYJKoZIhvcNAQEFBQAwXzETMBEGCgmSJomT8ixkARkW
// SIG // A2NvbTEZMBcGCgmSJomT8ixkARkWCW1pY3Jvc29mdDEt
// SIG // MCsGA1UEAxMkTWljcm9zb2Z0IFJvb3QgQ2VydGlmaWNh
// SIG // dGUgQXV0aG9yaXR5MB4XDTA3MDQwMzEyNTMwOVoXDTIx
// SIG // MDQwMzEzMDMwOVowdzELMAkGA1UEBhMCVVMxEzARBgNV
// SIG // BAgTCldhc2hpbmd0b24xEDAOBgNVBAcTB1JlZG1vbmQx
// SIG // HjAcBgNVBAoTFU1pY3Jvc29mdCBDb3Jwb3JhdGlvbjEh
// SIG // MB8GA1UEAxMYTWljcm9zb2Z0IFRpbWUtU3RhbXAgUENB
// SIG // MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA
// SIG // n6Fssd/bSJIqfGsuGeG94uPFmVEjUK3O3RhOJA/u0afR
// SIG // TK10MCAR6wfVVJUVSZQbQpKumFwwJtoAa+h7veyJBw/3
// SIG // DgSY8InMH8szJIed8vRnHCz8e+eIHernTqOhwSNTyo36
// SIG // Rc8J0F6v0LBCBKL5pmyTZ9co3EZTsIbQ5ShGLieshk9V
// SIG // UgzkAyz7apCQMG6H81kwnfp+1pez6CGXfvjSE/MIt1Nt
// SIG // UrRFkJ9IAEpHZhEnKWaol+TTBoFKovmEpxFHFAmCn4Tt
// SIG // VXj+AZodUAiFABAwRu233iNGu8QtVJ+vHnhBMXfMm987
// SIG // g5OhYQK1HQ2x/PebsgHOIktU//kFw8IgCwIDAQABo4IB
// SIG // qzCCAacwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQU
// SIG // IzT42VJGcArtQPt2+7MrsMM1sw8wCwYDVR0PBAQDAgGG
// SIG // MBAGCSsGAQQBgjcVAQQDAgEAMIGYBgNVHSMEgZAwgY2A
// SIG // FA6sgmBAVieX5SUT/CrhClOVWeSkoWOkYTBfMRMwEQYK
// SIG // CZImiZPyLGQBGRYDY29tMRkwFwYKCZImiZPyLGQBGRYJ
// SIG // bWljcm9zb2Z0MS0wKwYDVQQDEyRNaWNyb3NvZnQgUm9v
// SIG // dCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHmCEHmtFqFKoKWt
// SIG // THNY9AcTLmUwUAYDVR0fBEkwRzBFoEOgQYY/aHR0cDov
// SIG // L2NybC5taWNyb3NvZnQuY29tL3BraS9jcmwvcHJvZHVj
// SIG // dHMvbWljcm9zb2Z0cm9vdGNlcnQuY3JsMFQGCCsGAQUF
// SIG // BwEBBEgwRjBEBggrBgEFBQcwAoY4aHR0cDovL3d3dy5t
// SIG // aWNyb3NvZnQuY29tL3BraS9jZXJ0cy9NaWNyb3NvZnRS
// SIG // b290Q2VydC5jcnQwEwYDVR0lBAwwCgYIKwYBBQUHAwgw
// SIG // DQYJKoZIhvcNAQEFBQADggIBABCXisNcA0Q23em0rXfb
// SIG // znlRTQGxLnRxW20ME6vOvnuPuC7UEqKMbWK4VwLLTiAT
// SIG // UJndekDiV7uvWJoc4R0Bhqy7ePKL0Ow7Ae7ivo8KBciN
// SIG // SOLwUxXdT6uS5OeNatWAweaU8gYvhQPpkSokInD79vzk
// SIG // eJkuDfcH4nC8GE6djmsKcpW4oTmcZy3FUQ7qYlw/FpiL
// SIG // ID/iBxoy+cwxSnYxPStyC8jqcD3/hQoT38IKYY7w17gX
// SIG // 606Lf8U1K16jv+u8fQtCe9RTciHuMMq7eGVcWwEXChQO
// SIG // 0toUmPU8uWZYsy0v5/mFhsxRVuidcJRsrDlM1PZ5v6oY
// SIG // emIp76KbKTQGdxpiyT0ebR+C8AvHLLvPQ7Pl+ex9teOk
// SIG // qHQ1uE7FcSMSJnYLPFKMcVpGQxS8s7OwTWfIn0L/gHkh
// SIG // gJ4VMGboQhJeGsieIiHQQ+kr6bv0SMws1NgygEwmKkgk
// SIG // X1rqVu+m3pmdyjpvvYEndAYR7nYhv5uCwSdUtrFqPYmh
// SIG // dmG0bqETpr+qR/ASb/2KMmyy/t9RyIwjyWa9nR2HEmQC
// SIG // PS2vWY+45CHltbDKY7R4VAXUQS5QrJSwpXirs6CWdRrZ
// SIG // kocTdSIvMqgIbqBbjCW/oO+EyiHW6x5PyZruSeD3AWVv
// SIG // iQt9yGnI5m7qp5fOMSn/DsVbXNhNG6HY+i+ePy5VFmvJ
// SIG // E6P9MYIEoTCCBJ0CAQEwgZAweTELMAkGA1UEBhMCVVMx
// SIG // EzARBgNVBAgTCldhc2hpbmd0b24xEDAOBgNVBAcTB1Jl
// SIG // ZG1vbmQxHjAcBgNVBAoTFU1pY3Jvc29mdCBDb3Jwb3Jh
// SIG // dGlvbjEjMCEGA1UEAxMaTWljcm9zb2Z0IENvZGUgU2ln
// SIG // bmluZyBQQ0ECEzMAAADKbNUyEjXE4VUAAQAAAMowCQYF
// SIG // Kw4DAhoFAKCBujAZBgkqhkiG9w0BCQMxDAYKKwYBBAGC
// SIG // NwIBBDAcBgorBgEEAYI3AgELMQ4wDAYKKwYBBAGCNwIB
// SIG // FTAjBgkqhkiG9w0BCQQxFgQUWw6L6bVDclQt584F6Ykj
// SIG // nTxZIjUwWgYKKwYBBAGCNwIBDDFMMEqgMIAuAFQARgBT
// SIG // AC4AQQBnAGkAbABlAC4AQwBvAG4AdAByAG8AbABzAF8A
// SIG // MgAuAGoAc6EWgBRodHRwOi8vbWljcm9zb2Z0LmNvbTAN
// SIG // BgkqhkiG9w0BAQEFAASCAQAIlBhd6Q2yi36ebbwnZHBi
// SIG // cy7UI3gLPtguvqXHXW58iA8zNhe/0rNIfQVZ3nxePUau
// SIG // /vUsyL/oCgGnffAgjUDkyndkdsPIQN8c3KYk0Bkzcx21
// SIG // MPAIhHPR9B/1jUmE7l97yLATf7D/DahYge3ZKAVw61vs
// SIG // /or7fIwhSUI1y1LHC+dtOHVokWuFM1uaAOnGbfdYX1Jl
// SIG // q+kmD7VUm7VvyqVwdXK0JdbyNLSWj9U+eAaeOoLIqJmw
// SIG // 2kij0+mdiK6BCjdAJ3NSehw8e/LSuQzb6qD5jUPeWXbX
// SIG // DTNIt8/7ROU/+FALNakdedw0vqH3eIMlCSQmOsZp7AV7
// SIG // asjNHxqFmOVioYICKDCCAiQGCSqGSIb3DQEJBjGCAhUw
// SIG // ggIRAgEBMIGOMHcxCzAJBgNVBAYTAlVTMRMwEQYDVQQI
// SIG // EwpXYXNoaW5ndG9uMRAwDgYDVQQHEwdSZWRtb25kMR4w
// SIG // HAYDVQQKExVNaWNyb3NvZnQgQ29ycG9yYXRpb24xITAf
// SIG // BgNVBAMTGE1pY3Jvc29mdCBUaW1lLVN0YW1wIFBDQQIT
// SIG // MwAAAFrtL/TkIJk/OgAAAAAAWjAJBgUrDgMCGgUAoF0w
// SIG // GAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG
// SIG // 9w0BCQUxDxcNMTQwNzIzMDkwODA4WjAjBgkqhkiG9w0B
// SIG // CQQxFgQUY+i52aJt83RU8en2MvqesdJReDswDQYJKoZI
// SIG // hvcNAQEFBQAEggEAbxfJmH+2hflloZTjqCt3aLlZwGmu
// SIG // sl/9rv2oAiMWnpkRSYvD+Zuev+FJDv642QjAjfXzt59p
// SIG // GQxUM0QNVhtZ1dKmN5Ew3pvjKxu0fG+AKhomrtRrv0RK
// SIG // X62eucEaKi9HHIIf5FPal6lhFzVdzicPT9VnxtLK3DG5
// SIG // 9bRof+DEYss+MZc7zqfQtrpUBPdv6TPCc+Uj8mbArTyG
// SIG // QjmgFAUj4XO4T9Tx/sNHj/5oCWK1UZz4IW1DLdkmMbHS
// SIG // bUyV4Su2fJS/Hq2KnAJT9qJvPsr6uSvGvNpvuRY597yR
// SIG // QqND5/Ld/LlMLJv25upsYsZ+0PruazodD9hlq4hV6F6M
// SIG // 67BhYQ==
// SIG // End signature block
